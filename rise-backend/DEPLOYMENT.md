# Laravel Backend Deployment to Render - Configuration Guide

## üöÄ **Render Service Configuration**

Use these exact values in your Render service setup:

### **Basic Settings**
- **Service Type**: Web Service
- **Source**: Connect your GitHub repository (`rise-mastery`)
- **Branch**: `development` (or your main branch)

### **Docker Configuration**
```
Registry Credential: No credential
Dockerfile Path: ./Dockerfile
Docker Build Context Directory: . 
Docker Command: (leave empty - uses Dockerfile CMD)
```

### **Environment Variables**
Set these in Render's Environment Variables section:

```bash
# Application Settings
APP_NAME=Rise Mastery API
APP_ENV=production
APP_DEBUG=false
APP_URL=https://your-service-name.onrender.com

# Database (Use Render PostgreSQL)
DB_CONNECTION=pgsql
DB_HOST=${{DATABASE_HOST}}
DB_PORT=${{DATABASE_PORT}}
DB_DATABASE=${{DATABASE_NAME}}
DB_USERNAME=${{DATABASE_USER}}
DB_PASSWORD=${{DATABASE_PASSWORD}}

# Session & Cache
SESSION_DRIVER=database
QUEUE_CONNECTION=database
CACHE_STORE=database

# Mail Configuration (Optional)
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_FROM_ADDRESS=noreply@your-domain.com
MAIL_FROM_NAME=Rise Mastery API

# Laravel Key (Will be auto-generated)
APP_KEY=base64:
```

### **Deploy Settings**
```
Pre-Deploy Command: (leave empty - handled by entrypoint script)
Auto-Deploy: On Commit
Deploy Hook: (generated automatically)
```

## üì¶ **Step-by-Step Deployment Process**

### 1. **Prepare Your Repository**
```bash
# Make sure all Docker files are committed
cd /home/kennedy/Desktop/mastery/rise-backend
git add .
git commit -m "Add Docker configuration for Render deployment"
git push origin development
```

### 2. **Create PostgreSQL Database on Render**
1. Go to Render Dashboard
2. Click "New" ‚Üí "PostgreSQL"
3. Name it: `rise-mastery-db`
4. Select a plan
5. Note the connection details

### 3. **Create Web Service on Render**
1. Click "New" ‚Üí "Web Service"
2. Connect your GitHub repository
3. Select `rise-mastery` repository
4. Branch: `development`
5. Root Directory: `rise-backend`

### 4. **Configure Service Settings**
- **Service Name**: `rise-mastery-api`
- **Region**: Choose closest to your users
- **Branch**: `development`
- **Runtime**: Docker

### 5. **Set Environment Variables**
Copy the environment variables from above, replacing:
- `your-service-name` with your actual Render service name
- Database variables with your PostgreSQL connection details
- Mail settings with your actual email configuration

## üîß **Local Testing Before Deployment**

Test your Docker setup locally:

```bash
# Build and run with Docker Compose
cd /home/kennedy/Desktop/mastery/rise-backend
docker-compose up --build

# Test the application
curl http://localhost:8080/api/health

# Clean up
docker-compose down
```

## üåê **Post-Deployment Steps**

### 1. **Verify Deployment**
```bash
# Check if your API is responding
curl https://your-service-name.onrender.com/api/health

# Test authentication endpoints
curl -X POST https://your-service-name.onrender.com/api/auth/signup \
  -H "Content-Type: application/json" \
  -d '{"name":"Test User","email":"test@example.com","password":"password123"}'
```

### 2. **Update Frontend Configuration**
Update your frontend's API client to use the new Render URL:

```javascript
// In your frontend apiClient.js
const API_BASE_URL = 'https://your-service-name.onrender.com/api';
```

## üõ† **Troubleshooting**

### Common Issues:

1. **Build Fails**: Check Docker build logs in Render dashboard
2. **Database Connection**: Verify PostgreSQL connection details
3. **Migrations Fail**: Check database permissions and connectivity
4. **CORS Issues**: Ensure CORS is configured for your frontend domain

### Debug Commands:
```bash
# Check application logs
docker logs container_name

# Access container shell
docker exec -it container_name /bin/sh

# Check Laravel logs
tail -f storage/logs/laravel.log
```

## üîí **Security Considerations**

1. **APP_KEY**: Auto-generated by entrypoint script
2. **Database**: Use Render's managed PostgreSQL
3. **HTTPS**: Automatically handled by Render
4. **Environment Variables**: Never commit sensitive data to Git

## üìä **Performance Optimization**

1. **Caching**: Laravel configs cached in production
2. **Database**: Use connection pooling
3. **Static Assets**: Consider CDN for file uploads
4. **Monitoring**: Use Render's built-in monitoring

Your Laravel backend is now ready for production deployment on Render! üéâ